<nav aria-label="Artwork actions" class="flex justify-between items-center">
    <button data-controller="back-button" data-action="click->back-button#goBack" class="btn btn-gray">{{ ux_icon('ic:outline-arrow-back', { class: 'w-5 h-5' }) }}<span class="md">{{'back'|trans}}</span></button>
    {% if app.request.attributes.get('_route') == 'app_artwork_show' and (is_granted('ROLE_ADMIN') or artwork.artist == app.user) %}
        <ul class="flex gap-2 sm:gap-4">
            <li><a href="{{ path('app_artwork_edit', {'id': artwork.id}) }}" class="btn btn-gray">{{ ux_icon('ic:outline-edit', { class: 'w-5 h-5' }) }}<span class="md">{{'edit'|trans}}</span></a></li>
            <li>{{ include('artwork/_delete_form.html.twig') }}</li>
        </ul>
    {% endif %}
    {% if app.request.attributes.get('_route') is same as('app_profile') %}
        <a href="{{ path('app_profile_edit') }}" class="btn btn-gray">{{ ux_icon('ic:outline-edit', { class: 'w-5 h-5' }) }}<span class="md">{{'edit'|trans}}</span></a>
    {% endif %}
    {% if conversation is defined and app.request.attributes.get('_route') == 'app_conversation' %}
        {% set isArtist = (artwork.artist == app.user) %}
        {% set order = conversation.order %}

        <div class="flex gap-2 sm:gap-4">
        {% if not isArtist and conversation.id is not null and order is null %}
            {{ include('order/_create_form.html.twig') }}
        {% endif %}
        {% if not isArtist and order is not null and order.status == 'pending' %}
            <span>en attente de validation</span>
            {{ include('order/_cancel_form.html.twig') }}
        {% endif %}
        {% if not isArtist and order is not null and order.status == 'accepted' %}
            <span>en cours de realisation</span>
        {% endif %}
        {% if not isArtist and order is not null and order.status == 'completed' %}
            <span>Oeuvre terminée</span>
        {% endif %}
        {% if not isArtist and order is not null and order.status == 'cancelled' %}
            <span>La commande est annulé</span>
        {% endif %}

        {% if isArtist and order is not null %}
            {% if order.status == 'pending' %}
                {{ include('order/_accept_form.html.twig') }}
            {% elseif order.status == 'accepted' %}
                {{ include('order/_complete_form.html.twig') }}
            {% elseif order.status == 'completed' %}
                <span>Oeuvre terminée</span>
            {% elseif order.status == 'cancelled' %}
                <span>La commande est annulé</span>
            {% endif %}

            {% if order.status != 'completed' and order.status != 'cancelled' %}
                {{ include('order/_cancel_form.html.twig') }}
            {% endif %}
        {% endif %}
        </div>
    {% endif %}
</nav>