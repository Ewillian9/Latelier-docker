<header id="site-header" data-controller="header" class="fixed left-1/2 duration-300 transition-transform -translate-x-1/2 z-50 bg-zinc-100/70 dark:bg-zinc-800/70 backdrop-blur-sm rounded-xl shadow-lg w-[97%] max-w-5xl p-2 sm:p-4 top-2 sm:top-4">
    <section class="flex justify-between items-center gap-2 sm:gap-4">
        <a href="{{ path('app_artwork_index') }}" class="flex items-center gap-1 text-2xl font-bold">{{ ux_icon('ic:round-home', { class: 'w-6 h-6' }) }}ADG</a>
        {% if app.request.attributes.get('_route') == 'app_artwork_index' %}
        <form method="get" action="{{ path('app_artwork_index') }}" class="w-full flex-1">
            <input type="text" name="q" value="{{ query }}" placeholder="Search artworks..." class="w-full border border-gray-300 dark:border-gray-700 rounded-md px-2 sm:px-4 bg-zinc-100/80 dark:bg-zinc-800/80 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-amber-400">
        </form>
        {% endif %}
        <nav aria-label="Main navigation" class="flex justify-end items-center gap-2 sm:gap-4">
            <button data-controller="theme" data-theme-target="button" data-action="click->theme#toggle" class="btn btn-gray sm">☀️</button>
            <div class="relative hidden sm:inline group">
            {% set flags = {
                'ar': 'flag:arab-4x3',
                'de': 'flag:de-4x3',
                'en': 'flag:gb-4x3',
                'es': 'flag:es-4x3',
                'fr': 'flag:fr-4x3',
                'hi': 'flag:in-4x3',
                'it': 'flag:it-4x3',
                'ja': 'flag:jp-4x3',
                'ko': 'flag:kr-4x3',
                'pt': 'flag:pt-4x3',
                'ru': 'flag:ru-4x3',
                'tr': 'flag:tr-4x3',
                'zh': 'flag:cn-4x3'
            } %}
                <button class="btn btn-gray">{{ ux_icon(flags[app.request.locale] ?? 'flag:gb-4x3', { class: 'w-5 h-5' }) }}<span class="md">{{ app.request.locale|upper }}</span></button>
                <ul class="absolute left-0 hidden group-hover:block z-50 bg-none shadow-md">
                    {% for lang, flag in flags %}
                        {% if app.request.locale != lang %}
                            <li>
                                <a href="{{ path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')|merge({'_locale': lang})) }}" data-turbo="false" class="btn btn-gray">{{ ux_icon(flag, { class: 'w-5 h-5' }) }}<span class="md">{{ lang|upper }}</span></a>
                            </li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>
            {% if app.user %}
                <a href="{{ path('app_profile') }}" class="btn btn-gray">{{ ux_icon('ic:outline-account-circle', { class: 'w-5 h-5' }) }}<span class="md">{{'profile'|trans}}</span></a>
                <a href="{{ path('app_logout') }}" class="btn btn-red">{{ ux_icon('mdi:logout', { class: 'w-5 h-5' }) }}<span class="md">{{'signout'|trans}}</span></a>
            {% else %}
                {% if (app.request.attributes.get('_route') != 'app_login') and (app.request.attributes.get('_route') != 'app_register') %}
                    <a href="{{ path('app_login') }}" class="btn btn-gray">{{ ux_icon('mdi:login', { class: 'w-5 h-5' }) }}<span class="md">{{'signin'|trans}}</span></a>
                {% endif %}
            {% endif %}
        </nav>
    </section>
</header>
